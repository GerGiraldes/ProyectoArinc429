<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Proyecto Arinc 429</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../ProyectoArinc429-master/styles/mainStyle.css" />
</head>
<body>

  <!-- Top bar: login a la izquierda + botón About a la derecha -->
  <div class="top-bar" role="navigation" aria-label="Barra superior">
    <div id="loginContainer"><!-- el script updateUI() inserta el pill-button o el saludo --></div>

    <div>
      <button id="aboutBtn" class="pill-button" onclick="toggleAbout()" aria-expanded="false" aria-controls="aboutCard">Sobre Nosotros</button>
    </div>
  </div>

  <div class="title-container">
    <div class="title">Proyecto ARINC429</div>
  </div>

  <div class="content" role="main" aria-label="Acciones principales">
    <button class="main-button" onclick="location.href='paginas/arinc429.html'">¿De qué se trata nuestro proyecto?</button>
    <button class="main-button" onclick="location.href='paginas/doñaRosa.html'">Explicación básica del proyecto</button>
    <button class="main-button" onclick="location.href='paginas/ingeniero.html'">Explicación técnica del proyecto</button>
    <button class="main-button" onclick="location.href='simulacion/indexInstrumentos.html'">Simulador de ARINC429</button>
  </div>

  <div id="aboutCard" aria-hidden="true">
    <div class="close-btn" onclick="toggleAbout()" aria-label="Cerrar">&times;</div>
    <img src="./images/inac.jpg" alt="Foto institucional">
    <div id="aboutText"></div>
    <p>Somos un grupo de estudiantes del INAC CIATA que en conjunto con los profesores desarrollamos un dispositivo transmisor y receptor de ARINC429, para más información sobre ARINC429 o nuestro equipo busque en esta página web.</p>
  </div>

  <script>
    function toggleAbout() {
      const card = document.getElementById('aboutCard');
      card.classList.toggle('open');
      const expanded = card.classList.contains('open');
      // usar id para asegurar que apuntamos al botón correcto
      const aboutBtn = document.getElementById('aboutBtn');
      if (aboutBtn) aboutBtn.setAttribute('aria-expanded', expanded);
      card.setAttribute('aria-hidden', !expanded);
    }

    function logout() {
      localStorage.removeItem("currentUser");
      location.reload();
    }

    function updateUI() {
      const user = localStorage.getItem("currentUser");
      const loginContainer = document.getElementById("loginContainer");

      if (user) {
        loginContainer.innerHTML = `
          <div class="dropdown">
            <button class="pill-button">Hola, ${user}!</button>
            <div class="dropdown-content">
              <div><strong>Hola, ${user}</strong></div>
              <div onclick="logout()">Cerrar sesión</div>
            </div>
          </div>`;
      } else {
        loginContainer.innerHTML = `<button id="loginBtn" class="pill-button" onclick="location.href='paginas/login.html'">Iniciar sesión</button>`;
      }
    }

    window.onload = updateUI;
  </script>

</body>
</html>